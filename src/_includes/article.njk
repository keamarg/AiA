{% extends "base.njk" %}

{% block styles %}
    h1 { margin: 0 0 0.75rem; letter-spacing: -0.02em; }
  .intro { margin-bottom: 1.5rem; }
{% endblock %}

{% block content %}
  {% set hasBlocks = blocks and (blocks | length) %}
  {% set __baseDir = '/assets/uploads/' %}
  <main>
    {% include "subnav.njk" %}
    <h1>{{ title }}</h1>
    {% if hasBlocks %}
      {% include "blocks.njk" %}
    {% else %}
      {% if intro %}
        <div class="intro">{{ intro }}</div>
      {% endif %}
      {% if image %}
        {% set __img = image %}
        {% if __img and __img[0] != '/' %}{% set __img = __baseDir ~ __img %}{% endif %}
        {% if __img %}{% set __img = __img | replace('/AiA/assets/', '/assets/') %}{% endif %}
        <figure class="page-hero">
          {% if image_url %}
            <a href="{{ image_url | url }}">
          {% endif %}
          <img src="{{ __img | url }}" alt="" />
          {% if image_url %}
            </a>
          {% endif %}
        </figure>
      {% endif %}
      <div class="prose">
        {{ content | fixImgUrls | safe }}
      </div>
    {% endif %}
  </main>
{% endblock %}
