{% extends "base.njk" %}

{% block styles %}
  .hero { min-height: 25vh; }
  .hero-overlay {
    bottom: -8rem;
    /* Accent glow + strong bottom fade to bg for short heroes */
    background:
      radial-gradient(800px 400px at 20% 10%, rgba(124,92,255,0.20), rgba(124,92,255,0) 60%),
      linear-gradient(to bottom, rgba(11,11,12,0.05) 0%, rgba(11,11,12,0.25) 20%, rgba(11,11,12,0.5) 40%, rgba(11,11,12,0.75) 60%, rgba(11,11,12,0.9) 75%, rgba(11,11,12,0.96) 88%, rgba(11,11,12,0.99) 95%, var(--bg) 100%);
    pointer-events: none;
  }
  .hero-content { padding: 2rem 1rem; }
  .hero h1 { font-size: clamp(1.8rem, 4vw, 3rem); margin: 0 0 0.5rem; }
  .hero p { font-size: clamp(1rem, 1.8vw, 1.15rem); }
  main { margin: -8rem auto 0; padding: 8rem 1rem 3rem; position: relative; z-index: 0; }
{% endblock %}

{% block content %}
  {% set hasBlocks = blocks and (blocks | length) %}
  {% set __baseDir = '/assets/uploads/' %}
  {% if not hasBlocks %}
    {% set __hero = hero_image %}
    {% if __hero and __hero[0] != '/' %}{% set __hero = __baseDir ~ __hero %}{% endif %}
    {% if __hero %}{% set __hero = __hero | replace('/AiA/assets/', '/assets/') %}{% endif %}
    <section class="hero" {% if __hero %}style="background-image: url('{{ __hero | url }}');"{% endif %}>
      <div class="hero-overlay"></div>
      <div class="hero-content">
        <h1>{{ hero_heading or title }}</h1>
        {% if hero_text %}<p>{{ hero_text }}</p>{% endif %}
      </div>
    </section>
  {% endif %}

  <main>
    {% include "subnav.njk" %}
    {% if hasBlocks %}
      {% include "blocks.njk" %}
    {% else %}
      {% if image %}
        {% set __img = image %}
        {% if __img and __img[0] != '/' %}{% set __img = __baseDir ~ __img %}{% endif %}
        {% if __img %}{% set __img = __img | replace('/AiA/assets/', '/assets/') %}{% endif %}
        <figure class="page-hero">
          {% if image_url %}
            <a href="{{ image_url | url }}">
          {% endif %}
          <img src="{{ __img | url }}" alt="" />
          {% if image_url %}
            </a>
          {% endif %}
        </figure>
      {% endif %}
      {% if intro %}
        <div class="intro">{{ intro }}</div>
      {% endif %}
      <div class="prose">
        {{ content | fixImgUrls | safe }}
      </div>
    {% endif %}
  </main>
{% endblock %}
